## Data Structure
定义：数据结构是计算机底层存储，组织数据的方式；是指数据相互之间是以什么方式排列在一起  
目的：为了方便管理和使用  

### stack
特点：first in, last out; 后进先出，先进后出
 一端开口一端封闭  
 进栈：a, b, c, d（栈底元素：a，栈顶元素d）  
 出栈：d，c，b，a  

### queue
特点：first in，first out；先进先出，后进后出  
两端开口  
 进栈：a, b, c, d（栈底元素：a，栈顶元素d）  
 出栈：a，b，c，d

### array
数组是查询快，增删慢的模型  
查询速度快：查询数据通过地址值和索引定位，查询人意数据耗时相同（元素在内存中是连续存储的）  
删除效率低：要将原始数据删除，同时后面每个数据前移  
添加效率极低：添位置后的每个数据后移，在添加元素
### linkedlist
链表厘米每一个元素都叫结点（node），结点的存储位置（地址）。结点里面存储了数据还存储了下一个结点的地址。  
头结点[head ^]  
```
例子：[head 11] -> [A 37] -> [C 96] -> [D ^]
                   11        37       96  
```
链表查询慢，无论查询哪个数据都是从头开始找  
链表增删相对快（对比数组）  
#### 双链表 
[^ value next-node-address] <-> {previous-node-address value next-node-address}<-> {previous-node-address value ^}

### tree(node)
node包含parent node地址值，自己的值，左子节点地址值，右子节点地址值  
度：一个节点有两个子结点，那度就是2，最下面一行没有节点度就是0  
树高：树的总层数(下图树高3)  
root：根节点（如图22）  
根节点的左子树：（18到16和20）  
根节点的右子树：（26到24和28）  
```
        22
    18      26
16    20   24   28
```
### binary tree
任意节点的度<=2
遍历：
- 前序遍历（中左右）：根节点开始，按照当前节点，左子节点，右子节点顺序遍历（22 18 16 20 26 24 28）
- 中序遍历（左中右）：根节点开始，按照左子节点，当前节点，右子节点顺序遍历 （16 18 20 22 24 26 28）从大到小
- 后序遍历（左右中）：根节点开始，按照左子节点，右子节点，当前节点顺序遍历 （16 20 18 24 28 26 22）
- 层序遍历：从根节点开始一层层遍历 （22 18 26 16 20 24 28）
```
        22
    18      26
16    20   24   28
```

### binary search tree
特点：
- 每一个节点最多有两个子节点
- 任意节点左子树上的值都小于当前节点
- 任意节点右子树上的值都大于当前节点

添加节点：小的存左边，大的存右边，相同不存  
查找：从root开始查，大就找右边，小就找左边  
弊端：有可能退化成链表（此时就需要平衡二叉树了）

### balanced binary tree
特点：
- 每一个节点最多有两个子节点
- 任意节点左子树上的值都小于当前节点
- 任意节点右子树上的值都大于当前节点
- 任意节点左右子树高度差不能超过1 (如下图就不是平衡二叉树，例如看节点10)
```
        7
      /   \
     4     10
    / \      \
   2   5      11
  / \    \      \
 1   3    6      12
                  \
                  13

```
#### 平衡二叉树 左旋
确定支点：从添加的节点开始，不断的往父节点找不平衡的节点  
```
     7
   /   \
  4    10
         \
         11
           \
           12

旋转之后：
     7
   /  \
  4   11
     /   \
    10    12

```
如图，从12开始看，12是满足平衡二叉树，在看11也满足，在看10，此时左边为0，右边为2，不满足平衡，且右边节点多，就开始左旋
步骤：
1. 以不平衡的点作为支点
2. 把支点左旋降级，变成左子节点
3. 晋升原来的右子节点（如图就是，10开始不平衡，把10放到左子节点，11向上，12也向上）

```
example 2:
     7
   /  \
  4   10
     /   \
    9    11
           \
           12
判断：插入12之后，不平衡，依次从下往上查看不平衡节点，发现是7（左1，右3），根据7开始左旋
     10
    /  \
   7    11
  / \     \
 4   9     12

```
步骤：
1. 以不平衡的点作为支点
2. 把支点左旋降级，变成左子节点
3. 原先的右子节点变成新的父节点，并把多余的左子节点出让，给已经降级的根节点当右子节点

#### 平衡二叉树 右旋
确定支点：从添加的节点开始，不断的往父节点找不平衡的节点  
```
            7
           / \
          4  10
         /
        2
       /
      1
判断：添加的是1节点，从1开始找，找到4节点开始不平衡。开始右旋4节点。4先降级
旋转之后：
            7
           / \
          2   10
         / \
        1   4

```
步骤：
1. 以不平衡的点作为支点
2. 把支点右旋降级，变成右子节点
3. 晋升原来的左子节点

```
example 2:
        7
       / \
      4   10
     / \
    2   5
   /
  1
判断：插入1之后，不平衡，依次从下往上查看不平衡节点，发现是7（左3，右1），根据7开始右旋。
        4
       / \
      2   7
     /   / \
    1   5   10
```
步骤：
1. 以不平衡的点作为支点
2. 将根节点的左侧往右拉
3. 原先的左子节点变成新的父节点，并把多余的右子节点出让，给已经降级的根节点当左子节点

#### 平衡二叉树需要旋转的四种情况
1. 左左
2. 左右
3. 右右
4. 右左

##### 左左
当根节点左子树的左子树有节点插入，导致二叉树不平衡  
解决方法：一次右旋
```
以下都是插入1之后不平衡
        7
       /  \
      4   10
     / \ 
    2   5
   /
  1
判断：7开始不平衡（左3，右1），右旋
        OR

         7
       /  \
      4   10
     / \ 
    2   5
     \
      3
判断：7开始不平衡（左3，右1），右旋

        4
       / \
      2   7
     /   / \
    1   5  10

        OR
        4
       / \
      2   7
       \  / \
        3 5  10

```

##### 左右
当根节点左子树的右节点有节点插入，导致二叉树不平衡  
解决方法：局部的左旋，在整体右旋
```
         7
       /  \
      4   10
     / \ 
    2   5
         \
          6
判断：先将4节点进行左旋
         7
       /  \
      5   10
     / \ 
    4   6
   /
  2
判断：此时7节点不平衡（左3，右1），右旋，变成如下(平衡了)
         5
       /  \
      4   7
     /   / \
    2   6   10

```

##### 右右
当根节点右子树的右节点有节点插入，导致二叉树不平衡  
解决方法：一次左旋
```
        7
       / \
      4   10
          / \
         9   11
              \
               12
判断：7节点不平衡（左1，右3）左旋
        10
       / \
      7   11
     / \    \
    4   9    11

```

##### 右左
当根节点右子树的左节点有节点插入，导致二叉树不平衡  
解决方法：局部的右旋，在整体左旋
```
        7
       / \
      4   10
          / \
         9   11
        /
       8

判断：先局部右旋
        7
       / \
      4   9
          / \
         8   10
              \
               11
判断：此时7节点不平衡（左1，右3），左旋整体
        9
       / \
      7   10
     / \    \
    4   8   11

```

#### 平衡二叉树总结
在平衡二叉树中，如何添加节点？和小的在左边，大的在右边  
在平衡二叉树中，如何查找单个节点？从根节点开始，小的查左边，大的查右边。  
为什么要旋转？因为添加了一个节点，导致树不平衡，需要旋转保持平衡
旋转触发时机：当插入一个node破坏了平衡的时候  
左左是什么？如何旋转？根节点的左子树的左节点有插入，导致不平衡；一次右旋
左右是什么？如何旋转？根节点的左子树的右节点有插入，导致不平衡；局部左旋，整体右旋
右左是什么？如何旋转？根节点的右子树的左节点有插入，导致不平衡；局部右旋，整体左旋
右右是什么？如何旋转？根节点的右子树的右节点有插入，导致不平衡；一次左旋

### red black tree
每一个节点可以是红或者黑；红黑树不是高度平衡的，它的平衡是通过“红黑规则”进行实现的  
#### 红黑规则
1. 每一个节点或是红色的，或者是黑色的
2. 根节点必须是黑色
3. 如果一个节点没有子节点或者父节点，则该节点相应的指针属性值为Nil，这些Nil视为也节点，每个叶节点（Nil）是黑色的
4. 如果某一个节点是红色，那么它的子节点必须是黑色（不能出现亮红色节点相连的情况）
5. 对每一个节点，从该节点到其所有后代叶节点的简单路径上，均包含相同数目的黑色节点。

添加节点规则：  
添加节点默认是红色的（效率高）
```
插入20，18，23

    20
    / \
   Nil Nil

插入18
    20
   /  \
  18   Nil
 / \
Nil Nil
此时违背规则5（20到左边的nil路上2黑节点，右边nil只有一个黑节点）将18节点变成红色

插入23
    20
   /  \
  18   23
 / \    / \
Nil Nil Nil Nil
此时违背规则5,将23节点变成红色
（添加三个元素调整两次）
```
添加节点
- 根
  - 直接变成黑色
- 非根
  - 父黑色
    - 则不需要任何操作
  - 父红色
    - 叔叔红色
      - 将父设为黑色，将叔叔设为黑色
      - 将祖父设为红色
      - 如果祖父为根，再将根变回黑色
      - 如果祖父非根，将祖父设为当前节点在进行判断
    - 叔叔黑色（当前节点是父的右孩子）
      - 把父作为当前节点并左旋，在进行判断
    - 叔叔黑色（当前节点是父的左孩子）
      - 将父设为黑色
      - 将祖父变为红色
      - 以祖父为支点进行右旋

```
插入22
    20b
   /  \
  18r   23r
 / \    / \
Nil Nil Nil Nil

    20b
   /  \
  18b    23b
 / \    / \
Nil Nil 22r Nil
        /\
      Nil Nil
（此时的叔叔节点就是18）
```
ps: 红黑树增删改查都很好